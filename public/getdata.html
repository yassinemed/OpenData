<html>

<head>
	<link rel="stylesheet" type="text/css" href="interface.css">
</head>

<body>
	<div class="container">
		<div id="left" class="col" onclick="cl_left()">
			<img id="myImg1">
		</div>
		<div id="right" class="col" onclick="cl_right()">
			<img id="myImg2">
		</div>
		<div>
			<script type="application/javascript">
				function getRandomInt(max) {
					return Math.floor(Math.random() * Math.floor(max));
				}
				var char1, char2;
				var name_left, name_right, quote_left, quote_right;
				//HP
				fetch('http://hp-api.herokuapp.com/api/characters')
					.then(response => response.json())
					.then(data => {
						im1 = getRandomInt(25);
						im2 = getRandomInt(25);
						while (im1 == im2) {
							im2 = getRandomInt(25);
						}
						name_left = data[im1].name;
						name_right = data[im2].name;
						document.getElementById("myImg1").src = data[im1].image;
						document.getElementById("myImg2").src = data[im2].image;

						char1 = "<p> <i>" + data[im1].name + "</i> </p>";
						char2 = "<p> <i>" + data[im2].name + "</i> </p>";

						probRon = getRandomInt(10)

						if (probRon == 0) {

							//Ron swanson
							fetch('getswanson')
								.then(response => response.json())
								.then(data => {
									quote_left = data[0]
									document.getElementById("left").innerHTML += "</br> <p> \"" + data[0] + "\"</p>" + char1;
								})
								.catch(err => {
									console.error('An error ocurred', err);
								})

							fetch('getswanson')
								.then(response => response.json())
								.then(data => {
									quote_right = data[0]
									document.getElementById("right").innerHTML += "</br> <p>\"" + data[0] + "\"</p>" + char2;
								})
								.catch(err => {
									console.error('An error ocurred', err);
								})
						} else {
							// Limite Limite
							fetch('/getcards')
								.then(response => response.json())
								.then(data => {
									document.getElementById("left").innerHTML += "</br> <p> \"" + data.text + "\"</p>" + char1;
								})
								.catch(err => {
									console.error('An error ocurred', err);
								});

							fetch('/getcards')
								.then(response => response.json())
								.then(data => {
									document.getElementById("right").innerHTML += "</br> <p>\"" + data.text + "\"</p>" + char2;
								})
								.catch(err => {
									console.error('An error ocurred', err);
								});

						}
					})
					.catch(err => {
						console.error('An error ocurred', err);
					});

				function cl_left() {
					alert(name_left)
					alert(quote_left)
					location.reload();
				}

				function cl_right() {
					alert(name_right)
					alert(quote_right)
					location.reload();
				}
			</script>

</body>

</html>